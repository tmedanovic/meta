(function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("@angular/core"),require("@angular/router"),require("rxjs/Observable"),require("rxjs/add/observable/of"),require("rxjs/add/operator/concat"),require("rxjs/add/operator/filter"),require("rxjs/add/operator/map"),require("rxjs/add/operator/reduce"),require("rxjs/add/operator/take"),require("rxjs/symbol/observable")):"function"==typeof define&&define.amd?define(["@angular/core","@angular/router","rxjs/Observable","rxjs/add/observable/of","rxjs/add/operator/concat","rxjs/add/operator/filter","rxjs/add/operator/map","rxjs/add/operator/reduce","rxjs/add/operator/take","rxjs/symbol/observable"],e):"object"==typeof exports?exports.meta=e(require("@angular/core"),require("@angular/router"),require("rxjs/Observable"),require("rxjs/add/observable/of"),require("rxjs/add/operator/concat"),require("rxjs/add/operator/filter"),require("rxjs/add/operator/map"),require("rxjs/add/operator/reduce"),require("rxjs/add/operator/take"),require("rxjs/symbol/observable")):t.meta=e(t["@angular/core"],t["@angular/router"],t["rxjs/Observable"],t["rxjs/add/observable/of"],t["rxjs/add/operator/concat"],t["rxjs/add/operator/filter"],t["rxjs/add/operator/map"],t["rxjs/add/operator/reduce"],t["rxjs/add/operator/take"],t["rxjs/symbol/observable"])})(this,function(t,e,a,r,i,n,o,s,u,c){return function(t){function e(r){if(a[r])return a[r].exports;var i=a[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var a={};return e.m=t,e.c=a,e.i=function(t){return t},e.d=function(t,a,r){e.o(t,a)||Object.defineProperty(t,a,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,"a",a),a},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=5)}([function(t,e,a){"use strict";var r=a(1);a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n});var i=function(){function t(){}return t}(),n=function(){function t(t){void 0===t&&(t={pageTitlePositioning:r.a.PrependPageTitle,defaults:{}}),this.settings=t}return t.prototype.getSettings=function(){return this.settings},t}()},function(t,e,a){"use strict";a.d(e,"a",function(){return r});var r;(function(t){t[t.AppendPageTitle=0]="AppendPageTitle",t[t.PrependPageTitle=10]="PrependPageTitle"})(r||(r={}))},function(t,e,a){"use strict";function r(t,e,a,r){var i,n=arguments.length,o=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,a):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,a,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(o=(n<3?i(o):n>3?i(e,a,o):i(e,a))||o);return n>3&&o&&Object.defineProperty(e,a,o),o}function i(t,e){return function(a,r){e(a,r,t)}}function n(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}e.a=r,e.b=i,e.c=n;Object.setPrototypeOf||Array,Object.assign},function(e,a){e.exports=t},function(t,e,a){"use strict";var r=a(2),i=a(3),n=(a.n(i),a(8)),o=(a.n(n),a(6)),s=a(9),u=(a.n(s),a(10)),c=(a.n(u),a(11)),l=(a.n(c),a(12)),f=(a.n(l),a(13)),d=(a.n(f),a(14)),p=(a.n(d),a(15)),g=(a.n(p),a(1)),h=a(0),v=a(7);a.d(e,"a",function(){return b});var b=function(){function t(t,e,a,r){this.loader=t,this.router=e,this.activatedRoute=a,this.headService=r,this.metaSettings=t.getSettings(),this.isMetaTagSet={},this.metaSettings.defer||this.init()}return t.prototype.init=function(t){var e=this;void 0===t&&(t=!0),t&&(this.useRouteData=!0,this.router.events.filter(function(t){return t instanceof n.NavigationEnd}).subscribe(function(t){e.traverseRoutes(e.activatedRoute,t.urlAfterRedirects)}))},t.prototype.refresh=function(){this.useRouteData&&this.traverseRoutes(this.router.routerState.root,this.router.url)},t.prototype.setTitle=function(t,e,a){var r=this;void 0===e&&(e=!1),void 0===a&&(a=!0);var i=this.getTitleWithPositioning(t,e);if(a){var o=this.router.events.filter(function(t){return t instanceof n.NavigationEnd}).subscribe(function(){r.updateTitle(i)});setTimeout(function(){o.unsubscribe()},1)}else this.updateTitle(i)},t.prototype.setTag=function(t,e,a){var r=this;if(void 0===a&&(a=!0),"title"===t)throw new Error("Attempt to set "+t+" through 'setTag': 'title' is a reserved tag name. Please use 'MetaService.setTitle' instead.");var i="og:locale"!==t&&"og:locale:alternate"!==t?this.callback(e||(this.metaSettings.defaults&&this.metaSettings.defaults[t]?this.metaSettings.defaults[t]:"")):s.Observable.of(e||(this.metaSettings.defaults&&this.metaSettings.defaults[t]?this.metaSettings.defaults[t]:""));if(a){var o=this.router.events.filter(function(t){return t instanceof n.NavigationEnd}).subscribe(function(){r.updateMetaTag(t,i)});setTimeout(function(){o.unsubscribe()},1)}else this.updateMetaTag(t,i)},t.prototype.createMetaTag=function(t){var e={};return e[0===t.lastIndexOf("og:",0)?"property":"name"]=t,this.headService.addMetaTag(e),e},t.prototype.getOrCreateMetaTag=function(t){var e;return e=0===t.lastIndexOf("og:",0)?this.headService.findFirstMetaTag("property",t):this.headService.findFirstMetaTag("name",t),e||(e=this.createMetaTag(t)),e},t.prototype.callback=function(t){if(this.metaSettings.callback){var e=this.metaSettings.callback(t);return a.i(v.a)(e)?e:s.Observable.of(e)}return s.Observable.of(t)},t.prototype.getTitleWithPositioning=function(t,e){var a=this,r=this.metaSettings.defaults&&this.metaSettings.defaults.title?this.callback(this.metaSettings.defaults.title):s.Observable.of(""),i=t?this.callback(t).concat(r).filter(function(t){return!!t}).take(1):r;switch(this.metaSettings.pageTitlePositioning){case g.a.AppendPageTitle:return(!e&&this.metaSettings.pageTitleSeparator&&this.metaSettings.applicationName?this.callback(this.metaSettings.applicationName).map(function(t){return t+a.metaSettings.pageTitleSeparator}):s.Observable.of("")).concat(i).reduce(function(t,e){return t+e});case g.a.PrependPageTitle:return i.concat(!e&&this.metaSettings.pageTitleSeparator&&this.metaSettings.applicationName?this.callback(this.metaSettings.applicationName).map(function(t){return a.metaSettings.pageTitleSeparator+t}):s.Observable.of("")).reduce(function(t,e){return t+e});default:throw new Error("Invalid pageTitlePositioning specified ["+this.metaSettings.pageTitlePositioning+"]!")}},t.prototype.updateTitle=function(t){var e=this,a=this.getOrCreateMetaTag("og:title");t.subscribe(function(t){a.content=t,e.headService.setTitle(t)})},t.prototype.updateLocales=function(t,e){var a=this;t||(t=this.metaSettings.defaults?this.metaSettings.defaults["og:locale"]:""),t&&this.metaSettings.defaults&&(this.metaSettings.defaults["og:locale"]=t.replace(/_/g,"-")),this.headService.setLocale(t),this.headService.removeMetaTags("property","og:locale:alternate"),t&&e&&e.split(",").forEach(function(e){if(t.replace(/-/g,"_")!==e.replace(/-/g,"_")){a.createMetaTag("og:locale:alternate").content=e.replace(/-/g,"_")}})},t.prototype.updateMetaTag=function(t,e){var a=this,r=this.getOrCreateMetaTag(t);e.subscribe(function(e){if(r.content="og:locale"===t?e.replace(/-/g,"_"):e,a.isMetaTagSet[t]=!0,"description"===t){a.getOrCreateMetaTag("og:description").content=e}else if("author"===t){var i=a.getOrCreateMetaTag("og:author");i.content=e}else if("publisher"===t){var n=a.getOrCreateMetaTag("og:publisher");n.content=e}else if("og:locale"===t){var o=a.metaSettings.defaults?a.metaSettings.defaults["og:locale:alternate"]:"";a.updateLocales(e,o),a.isMetaTagSet["og:locale:alternate"]=!0}else if("og:locale:alternate"===t){var s=a.getOrCreateMetaTag("og:locale"),u=s.getAttribute("content");a.updateLocales(u,e),a.isMetaTagSet["og:locale"]=!0}})},t.prototype.updateMetaTags=function(t,e){var a=this;if(e){if(e.disabled)return void this.updateMetaTags(t);this.setTitle(e.title,e.override,!1),Object.keys(e).forEach(function(t){var r=e[t];if("title"!==t&&"override"!==t){if("og:locale"===t)r=r.replace(/-/g,"_");else if("og:locale:alternate"===t){var i=e["og:locale"];return void a.updateLocales(i,e[t])}a.setTag(t,r,!1)}})}else{var r=this.metaSettings.defaults?this.metaSettings.defaults.title||this.metaSettings.applicationName:this.metaSettings.applicationName;this.setTitle(r,!0,!1)}this.metaSettings.defaults&&Object.keys(this.metaSettings.defaults).forEach(function(t){var r=a.metaSettings.defaults[t];if(!(e&&(t in a.isMetaTagSet||t in e)||"title"===t||"override"===t)){if("og:locale"===t)r=r.replace(/-/g,"_");else if("og:locale:alternate"===t){var i=e?e["og:locale"]:void 0;return void a.updateLocales(i,a.metaSettings.defaults[t])}a.setTag(t,r,!1)}});var i=((this.metaSettings.applicationUrl||"/")+t).replace(/(https?:\/\/)|(\/)+/g,"$1$2").replace(/\/$/g,"");this.setTag("og:url",i||"/",!1)},t.prototype.traverseRoutes=function(t,e){for(;t.children.length>0;)if(t=t.firstChild,t.snapshot.routeConfig.data){var a=t.snapshot.routeConfig.data.meta;this.updateMetaTags(e,a)}else this.updateMetaTags(e)},t}();b=r.a([a.i(i.Injectable)(),r.c("design:paramtypes",[h.a,n.Router,n.ActivatedRoute,o.a])],b)},function(t,e,a){"use strict";function r(){return new o.b}Object.defineProperty(e,"__esModule",{value:!0});var i=a(2),n=a(3),o=(a.n(n),a(0)),s=a(4),u=a(1);a.d(e,"PageTitlePositioning",function(){return u.a}),a.d(e,"MetaLoader",function(){return o.a}),a.d(e,"MetaStaticLoader",function(){return o.b}),a.d(e,"MetaService",function(){return s.a}),e.metaFactory=r,a.d(e,"MetaModule",function(){return c});var c=l=function(){function t(t){if(t)throw new Error("MetaModule already loaded; import in root module only.")}return t.forRoot=function(t){return void 0===t&&(t={provide:o.a,useFactory:r}),{ngModule:l,providers:[t,s.a]}},t}();c=l=i.a([a.i(n.NgModule)(),i.b(0,a.i(n.Optional)()),i.b(0,a.i(n.SkipSelf)()),i.c("design:paramtypes",[c])],c);var l},function(t,e,a){"use strict";var r=a(2),i=a(3);a.n(i);a.d(e,"a",function(){return n});var n=function(){function t(){this._head={metaTags:[],title:"",locale:""}}return Object.defineProperty(t.prototype,"Head",{get:function(){return this._head},enumerable:!0,configurable:!0}),t.prototype.setMetaTag=function(t,e,a){var r=this._head.metaTags.findIndex(function(a){return a[t]===e});r>-1?this._head.metaTags[r]=a:this.addMetaTag(a)},t.prototype.findFirstMetaTag=function(t,e){var a=this._head.metaTags.findIndex(function(a){return a[t]===e});return a>-1?this._head.metaTags[a]:null},t.prototype.findAllMetaTags=function(t,e){return this._head.metaTags.filter(function(a){return a[t]===e})},t.prototype.removeMetaTags=function(t,e){this._head.metaTags=this._head.metaTags.filter(function(a){return a[t]!==e})},t.prototype.addMetaTag=function(t){this._head.metaTags.push(t)},t.prototype.getMetaTags=function(){return this._head.metaTags},t.prototype.setTitle=function(t){this._head.title=t},t.prototype.setLocale=function(t){this._head.locale=t},t}();n=r.a([a.i(i.Injectable)()],n)},function(t,e,a){"use strict";function r(t){return!(!t||!t[i.$$observable])}var i=a(16);a.n(i);e.a=r},function(t,a){t.exports=e},function(t,e){t.exports=a},function(t,e){t.exports=r},function(t,e){t.exports=i},function(t,e){t.exports=n},function(t,e){t.exports=o},function(t,e){t.exports=s},function(t,e){t.exports=u},function(t,e){t.exports=c}])});